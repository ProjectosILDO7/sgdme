import{_ as T,F as V,r as w,P as S,o as D,R as z,G as t,H as c,I as o,S as f,J as a,U as p,aW as A,$ as g,Q as B,W as l,K as i,L as r,V as b,X as $,Y as L,Z as x,q as M,T as R,M as _,aD as F}from"./index.7da21d26.js";import{Q as O}from"./QSpace.3a10ff8b.js";import{Q as q}from"./QTooltip.c9aa2e35.js";import{Q as U,a as W}from"./QTable.225f2f0b.js";import{a as G,Q as I}from"./QMenu.545f9e0e.js";import{Q as y}from"./QItemLabel.4cc82bad.js";import{Q as H}from"./QList.5aa8713a.js";import{Q as J}from"./QPageSticky.89d15d6c.js";import{Q as K}from"./QPage.662efc68.js";import{a as X,b as Y}from"./QLayout.e394a839.js";import{u as Z}from"./userApi.671e77b5.js";import{u as j}from"./useNotify.5e9e3566.js";import{u as ee}from"./use-quasar.cb56f3dc.js";import{b as ae,i as oe}from"./inputVisual.14accdd7.js";import{s as se}from"./vue-json-excel.esm.271d34a6.js";import"./selection.9e1f0781.js";import"./QSelect.4dd9846d.js";import"./rtl.b51694b1.js";import"./use-fullscreen.9289527c.js";const te=[{name:"nome",label:"Nome de escola",align:"left",field:"nome",sortable:!0},{name:"numero",label:"N\xBA da escola",align:"left",field:"numero",sortable:!0},{name:"provincia",label:"Prov\xEDncia",align:"left",field:"provincia",sortable:!0},{name:"municipio",label:"Munic\xEDpio",align:"left",field:"municipio",sortable:!0},{name:"actions",label:"Op\xE7\xF5es",align:"left",field:"actions",sortable:!0}],le={"Nome da escola":"nome","N\xBA da escola":"numero","N\xBA do decreto":"num_decreto",Prov\u00EDncia:"provincia",Munic\u00EDpio:"municipio",Comuna:"comuna","Natureza da escola":"natureza_escola","Total de salas para professores":"salas_professores","Total de salas para alunos":"salas_alunos","Tipo de escola":"tipo_escola"};const re=V({components:{DownloadExcel:se},setup(){const e=w([]),{list:m,remove:Q}=Z(),v=S(),k=w(""),h=ee(),d="escolas",{notifyError:s,notifySuccess:u}=j(),C=async()=>{f.show({message:"Carregado escolas"});try{e.value=await m(d)}catch(n){s(n.message)}finally{f.hide()}},N=async n=>{try{h.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar ${n.nome} ?`,cancel:!0,persistent:!0}).onOk(async()=>{f.show({message:"Apagando escola..."}),await Q(d,n.id),C(),u("Escola apagada com sucesso")})}catch(E){s(E.message)}finally{f.hide()}},P=n=>{v.push({name:"form-escola",params:{id:n.id}})};return D(()=>{C()}),{columns:te,alterarItem:P,deletarItem:N,escolas:e,btnConfig:ae,inputConfig:oe,fields:le,filter:k}}}),ne={key:0,class:"row"},ie={key:1,class:"flex flex-center text-body1 text-center"},ce={class:"row text-body3 text-h5 flex-center q-pa-lg bg-secondary text-white"},me={class:"secondary"},de={class:"secondary"},ue={key:3,class:"flex flex-center text-body1 text-center"};function fe(e,m,Q,v,k,h){const d=z("download-excel");return t(),c(X,null,{default:o(()=>[a(Y,null,{default:o(()=>[a(K,{padding:""},{default:o(()=>[e.$q.platform.is.desktop&&e.escolas!=null?(t(),p("div",ne,[a(U,{rows:e.escolas,flat:"",bordered:"",columns:e.columns,"row-key":"id",class:"col-12","virtual-scroll":"",filter:e.filter},{top:o(()=>[a(A,g({class:"",type:"text",label:"Pesquisar"},{...e.inputConfig},{modelValue:e.filter,"onUpdate:modelValue":m[0]||(m[0]=s=>e.filter=s)}),{prepend:o(()=>[a(B,{name:"mdi-magnify"})]),_:1},16,["modelValue"]),a(O),e.$q.platform.is.desktop?(t(),c(l,g({key:0,icon:"mdi-plus",label:"Cadastrar nova escola",to:{name:"form-escola"}},{...e.btnConfig}),null,16)):i("",!0),a(d,{data:e.escolas,fields:e.fields,worksheet:"Escolas",name:"Escolas.xls",class:"q-ml-md"},{default:o(()=>[a(l,g({icon:"mdi-file-excel",label:"Exportar uma lista"},{...e.btnConfig}),null,16)]),_:1},8,["data","fields"])]),"body-cell-actions":o(s=>[a(W,{props:s,class:"q-gutter-x-sm text-center"},{default:o(()=>[a(l,{icon:"mdi-pencil-outline",color:"info",dense:"",size:"sm",onClick:u=>e.alterarItem(s.row)},{default:o(()=>[a(q,null,{default:o(()=>[r("Alterar")]),_:1})]),_:2},1032,["onClick"]),a(l,{icon:"mdi-delete-outline",color:"negative",dense:"",size:"sm",onClick:u=>e.deletarItem(s.row)},{default:o(()=>[a(q,null,{default:o(()=>[r("Apagar")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])])):i("",!0),e.$q.platform.is.desktop&&e.escolas==null?(t(),p("div",ie,[a(l,{flat:"",color:"red"},{default:o(()=>[r(" De momento n\xE3o tens nenhuma escola cadastrada ")]),_:1})])):i("",!0),e.$q.platform.is.mobile&&e.escolas!=null?(t(),c(H,{key:2,bordered:""},{default:o(()=>[b("div",ce,[a(l,{flat:"",icon:"mdi-school-outline",label:"Escolas"})]),a($),(t(!0),p(x,null,L(e.escolas,s=>M((t(),c(G,{key:s.id,class:"q-mb-sm",clickable:"",onClick:u=>e.alterarItem(s)},{default:o(()=>[a(I,{avatar:""},{default:o(()=>[a(R,{color:"primary","text-color":"white",icon:"mdi-school-outline"})]),_:1}),a(I,null,{default:o(()=>[a(y,null,{default:o(()=>[r(_(s.nome),1)]),_:2},1024),a(y,{caption:"",lines:"1"},{default:o(()=>[r("N\xBA da escola: "),b("strong",me,_(s.numero),1)]),_:2},1024),a(y,{caption:"",lines:"1"},{default:o(()=>[r("N\xBA do decreto: "),b("strong",de,_(s.num_decreto),1)]),_:2},1024)]),_:2},1024),a($)]),_:2},1032,["onClick"])),[[F]])),128))]),_:1})):i("",!0),e.$q.platform.is.mobile&&e.escolas==null?(t(),p("div",ue,[a(l,{color:"red"},{default:o(()=>[r(" De momento n\xE3o tens nenhuma escola cadastrada ")]),_:1})])):i("",!0),e.$q.platform.is.mobile?(t(),c(J,{key:4,class:"margin-bottom",position:"bottom-right",offset:[18,18]},{default:o(()=>[a(l,{fab:"",icon:"mdi-plus",color:"primary",to:{name:"form-escola"}})]),_:1})):i("",!0)]),_:1})]),_:1})]),_:1})}var Se=T(re,[["render",fe],["__scopeId","data-v-28e3dbfa"]]);export{Se as default};
