import{_ as P,P as S,bm as V,r as z,j as A,o as I,S as t,G as u,H as g,I as n,J as r,bn as U,V as h,M as x,aW as B,$ as y,W as f,K as b}from"./index.7da21d26.js";import{Q as F}from"./QSpace.3a10ff8b.js";import{Q as M}from"./QForm.21c64c1f.js";import{Q as N}from"./QPageSticky.89d15d6c.js";import{Q as R}from"./QPage.662efc68.js";import{a as j,b as L}from"./QLayout.e394a839.js";import{i as W,b as D}from"./inputVisual.14accdd7.js";import{u as E}from"./useNotify.5e9e3566.js";import{u as G}from"./userApi.671e77b5.js";import{u as H}from"./use-quasar.cb56f3dc.js";const J={name:"form-categoria",setup(){const{post:i,getById:o,update:C,remove:a}=G(),_=H(),{notifyError:c,notifySuccess:e}=E(),l="categorias",v=S(),w=V(),m=z({categoria:""}),d=A(()=>w.params.id);I(()=>{d.value&&k(l,d.value)});const Q=async s=>{try{_.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar a categoria ${s.categoria} ?`,cancel:!0,persistent:!0}).onOk(async()=>{t.show({message:"Apagando categoria..."}),await a(l,s.id),v.push({name:"categorias"}),e("categoria apagada com sucesso")})}catch(p){c(p.message)}finally{t.hide()}},k=async(s,p)=>{try{t.show({message:"Carregando informa\xE7\xF5es"}),m.value=await o(s,p)}catch(q){c(q.message)}finally{t.hide()}};return{form:m,isUpdate:d,deletarItem:Q,table:l,addCategoria:async()=>{try{d.value?(t.show({message:"Actualiza\xE7\xE3o em processamento"}),await C(l,m.value),e("Categoria actualizada com sucesso")):(t.show({message:"Cadastro em processamento"}),await i(l,m.value),e("Categoria cadastrada com sucesso"))}catch(s){c(s.message)}finally{t.hide(),v.push({name:"categorias"})}},inputConfig:W,btnConfig:D}}},K={class:"col-12 text-body3 text-center q-mt-lg"},O={class:"col-md-4 col-sm-6 col-xs-10 q-gutter-y-sm"};function T(i,o,C,a,_,c){return u(),g(j,null,{default:n(()=>[r(L,null,{default:n(()=>[r(R,{padding:""},{default:n(()=>[r(M,{class:"row justify-center",onSubmit:U(a.addCategoria,["prevent"])},{default:n(()=>[h("p",K,x(a.isUpdate?"Actualizar categoria":"Registo de categorias"),1),h("div",O,[r(B,y({modelValue:a.form.categoria,"onUpdate:modelValue":o[0]||(o[0]=e=>a.form.categoria=e),label:"Categoria",class:"col-12","lazy-rules":"",rules:[e=>e&&e.length>0||"Porfavor digite o nome da categoria"]},{...a.inputConfig}),null,16,["modelValue","rules"]),r(f,y({type:"submit",icon:a.isUpdate?"mdi-file-edit-outline":"mdi-content-save-all",color:"primary",class:"full-width",label:a.isUpdate?"Actualizar categoria":"Cadastrar categoria"},{...a.btnConfig}),null,16,["icon","label"]),i.$q.platform.is.mobile&&a.isUpdate?(u(),g(f,{key:0,onClick:o[1]||(o[1]=e=>a.deletarItem(a.form)),icon:"mdi-delete-empty",color:"secondary",class:"full-width",label:"Apagar categoria"})):b("",!0),r(F),i.$q.platform.is.mobile?(u(),g(f,y({key:1,icon:"mdi-format-list-bulleted",class:"full-width q-pa-sm",label:"Lista de categorias",flat:"",to:{name:"categorias"}},{...a.btnConfig}),null,16)):b("",!0)])]),_:1},8,["onSubmit"]),i.$q.platform.is.mobile?(u(),g(N,{key:0,class:"margin-bottom",position:"bottom-right",offset:[18,18],onClick:o[2]||(o[2]=e=>a.form="")},{default:n(()=>[r(f,{fab:"",icon:"mdi-plus",color:"primary",to:{name:"form-categoria"}})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})}var la=P(J,[["render",T],["__scopeId","data-v-5199bc60"]]);export{la as default};
