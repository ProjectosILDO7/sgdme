import{_ as R,P as j,bm as H,r as s,j as T,o as W,S as d,G as _,H as y,I as t,J as l,bn as G,V as g,M as U,aW as n,$ as i,W as x,K as Q}from"./index.9b6e026f.js";import{Q as p}from"./QSelect.b4606625.js";import{Q as J}from"./QForm.fa2fb28e.js";import{Q as K}from"./QPage.dd70dd7a.js";import{a as X,b as Y}from"./QLayout.09699cc6.js";import{u as Z}from"./useNotify.054ef273.js";import{u as h}from"./userApi.446ff058.js";import{u as $}from"./use-quasar.3743795d.js";import{b as oo,i as ao}from"./inputVisual.14accdd7.js";import{f as eo}from"./formatCurrency.6090a7ed.js";import"./QMenu.095f5cf5.js";import"./selection.db7c3400.js";import"./QItemLabel.1b5bf3c5.js";import"./rtl.b51694b1.js";const lo={name:"form-categoria",components:{},setup(){const{post:f,getById:e,update:I,list:a,remove:q,uploadImage:P,fileName:o}=h(),{notifyError:V,notifySuccess:b}=Z(),u="funcionarios",w=j(),S={decimal:".",thousands:",",prefix:"$ ",suffix:" #",precision:2,masked:!1},B=H(),F=$(),k=s(["Masculino","Femenino"]),z=s(["T\xE9cnico Basico","T\xE9cnico m\xE9dio","Licenciado(a)","Mestre","Phd"]),A=s([]),N=s([]),v=s([]),m=s({nome:"",nome_pai:"",nome_mae:"",num_agente:"",num_bilhete:"",data_emissao:"",data_caducidade:"",data_nascimento:"",genero:"",data_inicio_funcao:"",provincia:"",municipio:"",comuna:"",localidade:"",categoria_id:"",escola_id:"",habilitacao:"",area_formacao:"",instituto_formacao:"",img_url:"",file_name:"",salario_base:0,salario_liquido:0,nivelAcademico:"",salario_base_extenso:"",salario_liquido_extenso:""}),c=T(()=>B.params.id),D=async()=>{A.value=await a("categorias")},M=async()=>{N.value=await a("escolas")},L=async r=>{try{F.dialog({title:"Confirma\xE7\xE3o",message:`tens a certeza que pretendes eliminar ${r.nome} ?`,cancel:!0,persistent:!0}).onOk(async()=>{d.show({message:"Apagando informa\xE7\xE3o do funcion\xE1rio..."}),await q(u,r.id),w.push({name:"funcionario"}),b("Funcion\xE1rio apagado com sucesso")})}catch(C){V(C.message)}finally{d.hide()}};W(()=>{D(),M(),c.value&&E(u,c.value)});const E=async(r,C)=>{try{d.show({message:"Carregando informa\xE7\xF5es"}),m.value=await e(r,C)}catch(O){V(O.message)}finally{d.hide()}};return{form:m,isUpdate:c,valorNumber:r=>{m.value.salario_base=r},table:u,image:v,deletarItem:L,addItems:async()=>{try{v.value.length>0&&await P(v.value[0],"sgdme").then(r=>{m.value.img_url=r,m.value.file_name=o}),c.value?(d.show({message:"Actualiza\xE7\xE3o em processamento"}),await I(u,m.value),b("Funcion\xE1rio actualizado com sucesso")):(d.show({message:"Cadastro em processamento"}),await f(u,m.value),b("Funcion\xE1rio cadastrada com sucesso"))}catch(r){V(r.message)}finally{d.hide(),w.push({name:"funcionarios"})}},categorias:A,escolas:N,options:k,btnConfig:oo,inputConfig:ao,nivelAcademico:z,formatCurrency:eo,moneyFormatForDirective:S}}},io={class:"col-12 text-body3 text-center q-mt-lg"},no={class:"col-md-6 col-sm-6 col-xs-10 q-gutter-y-sm"},ro={class:"text-xxs text-primary meu-tamanho"},mo={class:"text-xxs text-primary meu-tamanho"};function so(f,e,I,a,q,P){return _(),y(X,null,{default:t(()=>[l(Y,null,{default:t(()=>[l(K,{padding:""},{default:t(()=>[l(J,{class:"row justify-center",onSubmit:G(a.addItems,["prevent"])},{default:t(()=>[g("p",io,U(a.isUpdate?"Actualizar dados do funcion\xE1rio":"Cadastrar novo funcion\xE1rio"),1),g("div",no,[l(n,i({label:"Carregue uma foto do tipo passe","stack-label":"",modelValue:a.image,"onUpdate:modelValue":e[0]||(e[0]=o=>a.image=o),multiple:"",filled:"",type:"file",accept:"image/*"},{...a.inputConfig}),null,16,["modelValue"]),l(n,i({modelValue:a.form.nome,"onUpdate:modelValue":e[1]||(e[1]=o=>a.form.nome=o),label:"Nome completo",class:"col-12",rules:[o=>!!o||"Porfavor digite o nome da escola"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.nome_pai,"onUpdate:modelValue":e[2]||(e[2]=o=>a.form.nome_pai=o),label:"Nome do pai",class:"col-12",rules:[o=>!!o||"Porfavor o nome do pai"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.nome_mae,"onUpdate:modelValue":e[3]||(e[3]=o=>a.form.nome_mae=o),label:"Nome da ma\xEA",class:"col-12",rules:[o=>!!o||"Porfavor o nome da ma\xEA"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.num_bilhete,"onUpdate:modelValue":e[4]||(e[4]=o=>a.form.num_bilhete=o),label:"N\xBA do bilhete",class:"col-12",rules:[o=>!!o||"Porfavor informe o n\xBA do Bilhete",o=>o&&o.length==14||"O n\xBA do Bilhete tem de ter no m\xEDnimo 14 caracteres"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.data_emissao,"onUpdate:modelValue":e[5]||(e[5]=o=>a.form.data_emissao=o),label:"Data de emiss\xE3o",class:"col-12",type:"date",rules:[o=>!!o||"Porfavor informe a data de emiss\xE3o"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.data_caducidade,"onUpdate:modelValue":e[6]||(e[6]=o=>a.form.data_caducidade=o),label:"Data de caducidade",class:"col-12",type:"date",rules:[o=>!!o||"Porfavor informe a data de caducidade"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.data_nascimento,"onUpdate:modelValue":e[7]||(e[7]=o=>a.form.data_nascimento=o),label:"Data de nascimento",class:"col-12",type:"date",rules:[o=>!!o||"Porfavor informe a data de nascimento"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(p,i({modelValue:a.form.genero,"onUpdate:modelValue":e[8]||(e[8]=o=>a.form.genero=o),options:a.options,"option-label":"name",label:"Selecione o g\xEAnero",rules:[o=>!!o||"Porfavor informe o g\xEAnero do funcion\xE1rio"]},{...a.inputConfig}),null,16,["modelValue","options","rules"]),l(p,i({modelValue:a.form.nivelAcademico,"onUpdate:modelValue":e[9]||(e[9]=o=>a.form.nivelAcademico=o),options:a.nivelAcademico,"option-label":"name",label:"Selecione o n\xEDvel acad\xEAmico",rules:[o=>!!o||"Porfavor informe o n\xEDvel acad\xEAmico do funcion\xE1rio"]},{...a.inputConfig}),null,16,["modelValue","options","rules"]),l(n,i({modelValue:a.form.data_inicio_funcao,"onUpdate:modelValue":e[10]||(e[10]=o=>a.form.data_inicio_funcao=o),label:"Data de in\xEDcio de fun\xE7\xE3o",class:"col-12",type:"date",rules:[o=>!!o||"Porfavor informe a data de in\xEDcio de fun\xE7\xE3o"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.num_agente,"onUpdate:modelValue":e[11]||(e[11]=o=>a.form.num_agente=o),label:"N\xBA de agente",class:"col-12",rules:[o=>!!o||"Porfavor informe o n\xBA de agente",o=>o&&o.length==7||"O n\xBA de agente tem de ter no m\xEDnimo 7 caracteres"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.provincia,"onUpdate:modelValue":e[12]||(e[12]=o=>a.form.provincia=o),label:"Provincia",class:"col-12",rules:[o=>!!o||"Informe a prov\xEDncia"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.municipio,"onUpdate:modelValue":e[13]||(e[13]=o=>a.form.municipio=o),label:"Munic\xEDpio",class:"col-12",rules:[o=>!!o||"Informe o munic\xEDpio"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.comuna,"onUpdate:modelValue":e[14]||(e[14]=o=>a.form.comuna=o),label:"Comuna",class:"col-12","lazy-rules":"",rules:[o=>!!o||"Informe a Comuna"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.localidade,"onUpdate:modelValue":e[15]||(e[15]=o=>a.form.localidade=o),label:"Localidade",class:"col-12",rules:[o=>!!o||"Informe a localidade"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(p,i({modelValue:a.form.categoria_id,"onUpdate:modelValue":e[16]||(e[16]=o=>a.form.categoria_id=o),options:a.categorias,"option-value":"id","option-label":"categoria","map-options":"","emit-value":"",label:"Selecione uma categoria",rules:[o=>!!o||"Porfavor Selecione uma categoria"]},{...a.inputConfig}),null,16,["modelValue","options","rules"]),l(n,i({type:"numeric",modelValue:a.form.salario_base,"onUpdate:modelValue":e[17]||(e[17]=o=>a.form.salario_base=o),label:"Vencimento Base",class:"col-12",rules:[o=>!!o||"Informe o sal\xE1rio base"]},{...a.inputConfig}),{append:t(()=>[g("span",ro,U(a.formatCurrency(a.form.salario_base)),1)]),_:1},16,["modelValue","rules"]),l(n,i({class:"col-12"},{...a.inputConfig},{rules:[o=>!!o||"Informe o sal\xE1rio base por extenso"],modelValue:a.form.salario_base_extenso,"onUpdate:modelValue":e[18]||(e[18]=o=>a.form.salario_base_extenso=o),label:"Escreva o sal\xE1rio base por extenso"}),null,16,["rules","modelValue"]),l(n,i({modelValue:a.form.salario_liquido,"onUpdate:modelValue":e[19]||(e[19]=o=>a.form.salario_liquido=o),label:"Vencimento L\xEDquido",class:"col-12",rules:[o=>!!o||"Informe o sal\xE1rio l\xEDquido"]},{...a.inputConfig},{ref:"inputRef"}),{append:t(()=>[g("span",mo,U(a.formatCurrency(a.form.salario_liquido)),1)]),_:1},16,["modelValue","rules"]),l(n,i({class:"col-12"},{...a.inputConfig},{rules:[o=>!!o||"Informe o sal\xE1rio liquido por extenso"],modelValue:a.form.salario_liquido_extenso,"onUpdate:modelValue":e[20]||(e[20]=o=>a.form.salario_liquido_extenso=o),label:"Escreva o sal\xE1rio l\xEDquido por extenso"}),null,16,["rules","modelValue"]),l(p,i({modelValue:a.form.escola_id,"onUpdate:modelValue":e[21]||(e[21]=o=>a.form.escola_id=o),options:a.escolas,"option-value":"id","option-label":"nome","map-options":"","emit-value":"",label:"Selecione a escola a que pertence",rules:[o=>!!o||"Porfavor a escola a que pertence"]},{...a.inputConfig}),null,16,["modelValue","options","rules"]),l(n,i({modelValue:a.form.habilitacao,"onUpdate:modelValue":e[22]||(e[22]=o=>a.form.habilitacao=o),label:"Habilita\xE7\xE3o",class:"col-12",rules:[o=>!!o||"Informe a habilita\xE7\xE3o"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.area_formacao,"onUpdate:modelValue":e[23]||(e[23]=o=>a.form.area_formacao=o),label:"\xC1rea de forma\xE7\xE3o",class:"col-12",rules:[o=>!!o||"Informe a \xE1rea de forma\xE7\xE3o"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(n,i({modelValue:a.form.instituto_formacao,"onUpdate:modelValue":e[24]||(e[24]=o=>a.form.instituto_formacao=o),label:"Instituto de forma\xE7\xE3o",class:"col-12",rules:[o=>!!o||"Informe o nome da institui\xE7\xE3o onde se formou"]},{...a.inputConfig}),null,16,["modelValue","rules"]),l(x,i({type:"submit",icon:a.isUpdate?"mdi-file-edit-outline":"mdi-content-save-all",class:"full-width",label:a.isUpdate?"Actualizar dados do funcion\xE1rio":"Cadastrar o funcion\xE1rio"},{...a.btnConfig}),null,16,["icon","label"]),f.$q.platform.is.mobile&&a.isUpdate?(_(),y(x,{key:0,onClick:e[25]||(e[25]=o=>a.deletarItem(a.form)),outline:"",icon:"mdi-delete-empty",color:"negative",class:"full-width",label:"Apagar dados do  funcion\xE1rio","no-caps":""})):Q("",!0),f.$q.platform.is.mobile?(_(),y(x,{key:1,flat:"",icon:"mdi-format-list-bulleted",color:"primary",class:"full-width q-pa-sm",label:"Lista de funcion\xE1rios",to:{name:"funcionarios"}})):Q("",!0)])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}var Po=R(lo,[["render",so],["__scopeId","data-v-2ebd3ae8"]]);export{Po as default};
